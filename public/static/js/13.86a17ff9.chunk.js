(this["webpackJsonp@uniswap/interface"]=this["webpackJsonp@uniswap/interface"]||[]).push([[13],{1754:function(e,t,n){},1755:function(e,t,n){},1767:function(e,t,n){"use strict";n.r(t),n.d(t,"BAG_WIDTH",(function(){return Ye})),n.d(t,"XXXL_BAG_WIDTH",(function(){return Xe}));var c,r=n(24),a=n(3),s=n.n(a),i=n(16),o=n(10),l=n(4),u=n(2),d=n(62),b=n(122),j=n(40),f=n(27),p=n(18),O=n(260),g=n(5),x=n(25),h=n(149),m=n(17),v=n(9),w=n(736),I=n(739),N=n(75),E=n(430),k=n(1),A=n(986),y=n(59),T=n(11),S=n(741),C=n(0),P=u.default.div.withConfig({componentId:"sc-rcepl8-0"})(["padding:0px 12px;"]),_=u.default.div.withConfig({componentId:"sc-rcepl8-1"})(["border-top:1px solid ",";color:",";display:flex;flex-direction:column;margin:0px 16px 8px;padding:12px 0px;border-bottom-left-radius:12px;border-bottom-right-radius:12px;"],(function(e){return e.theme.backgroundOutline}),(function(e){return e.theme.textPrimary})),z=Object(u.default)(x.d).withConfig({componentId:"sc-rcepl8-2"})(["padding-top:8px;padding-bottom:",";"],(function(e){return e.warningText?"8px":"20px"})),R=Object(u.default)(A.a).withConfig({componentId:"sc-rcepl8-3"})(["width:14px;margin-right:4px;color:",";"],(function(e){return e.theme.accentWarning})),L=Object(u.default)(T.v.BodyPrimary).withConfig({componentId:"sc-rcepl8-4"})(["align-items:center;color:",";display:flex;justify-content:center;margin:12px 0 !important;text-align:center;"],(function(e){return e.theme.accentWarning})),G=Object(u.default)(m.e).withConfig({componentId:"sc-rcepl8-5"})(["background:",";color:",";font-weight:600;line-height:24px;font-size:16px;gap:16px;justify-content:center;border:none;border-radius:12px;padding:12px 0px;opacity:",";cursor:",";"],(function(e){return e.theme.accentAction}),(function(e){return e.theme.accentTextLightPrimary}),(function(e){return e.disabled?.6:1}),(function(e){return e.disabled?"auto":"pointer"})),B=function(e){var t=e.disabled,n=e.children,c=e.onClick;return Object(C.jsx)(G,{disabled:t,onClick:c,children:n})},D=function(e){var t=e.children;return t?Object(C.jsxs)(L,{fontSize:"14px",lineHeight:"20px",children:[Object(C.jsx)(R,{}),t]}):null},F=[N.d.FETCHING_ROUTE,N.d.CONFIRMING_IN_WALLET,N.d.FETCHING_FINAL_ROUTE,N.d.PROCESSING_TRANSACTION],M=function(e){var t=e.totalEthPrice,n=e.totalUsdPrice,c=e.bagStatus,r=e.fetchAssets,a=e.eventProperties,s=Object(y.v)(),i=Object(p.useWeb3React)(),o=i.account,u=i.chainId,d=i.connector,O=Boolean(o&&u),x=Object(w.a)((function(e){return e.setBagExpanded})),A=Object(I.a)().balance,R=Object(k.useMemo)((function(){if(O&&u===v.e.MAINNET)return Object(b.parseEther)(A).gte(t)}),[O,u,A,t]),L=Object(k.useMemo)((function(){var e=r,t=Object(C.jsx)(g.b,{id:"Something went wrong"}),n=!0,a=null;return O&&u!==v.e.MAINNET?(e=function(){return Object(S.a)(d,v.e.MAINNET)},t=Object(C.jsx)(g.b,{id:"Switch networks"}),n=!1,a=Object(C.jsx)(g.b,{id:"Wrong network"})):!1===R?(t=Object(C.jsx)(g.b,{id:"Pay"}),n=!0,a=Object(C.jsx)(g.b,{id:"Insufficient funds"})):c===N.d.WARNING?a=Object(C.jsx)(g.b,{id:"Something went wrong. Please try again."}):O?c===N.d.FETCHING_FINAL_ROUTE||c===N.d.CONFIRMING_IN_WALLET?(n=!0,t=Object(C.jsx)(g.b,{id:"Proceed in wallet"})):c===N.d.PROCESSING_TRANSACTION?(n=!0,t=Object(C.jsx)(g.b,{id:"Transaction pending"})):!0===R&&(n=!1,t=Object(C.jsx)(g.b,{id:"Pay"})):(e=function(){s(),x({bagExpanded:!1})},n=!1,t=Object(C.jsx)(g.b,{id:"Connect wallet"})),{buttonText:t,disabled:n,warningText:a,handleClick:e}}),[c,u,O,d,r,x,R,s]),G=L.buttonText,M=L.disabled,U=L.warningText,H=L.handleClick,W=F.includes(c);return Object(C.jsx)(P,{children:Object(C.jsxs)(_,{children:[Object(C.jsxs)(z,{gap:"xs",warningText:!!U,children:[Object(C.jsxs)(m.e,{justify:"space-between",children:[Object(C.jsx)("div",{children:Object(C.jsx)(T.v.HeadlineSmall,{children:"Total"})}),Object(C.jsx)("div",{children:Object(C.jsxs)(T.v.HeadlineSmall,{children:[Object(E.o)(t.toString()),"\xa0ETH"]})})]}),Object(C.jsx)(m.e,{justify:"flex-end",children:Object(C.jsx)(T.v.BodySmall,{color:"textSecondary",lineHeight:"20px",children:"".concat(Object(E.h)(n,!0))})})]}),Object(C.jsxs)(j.TraceEvent,{events:[f.BrowserEvent.onClick],name:f.NFTEventName.NFT_BUY_BAG_PAY,element:f.InterfaceElementName.NFT_BUY_BAG_PAY_BUTTON,properties:Object(l.a)({},a),shouldLogImpression:O&&!M,children:[Object(C.jsx)(D,{children:U}),Object(C.jsxs)(B,{onClick:H,disabled:M,children:[W&&Object(C.jsx)(h.a,{size:"20px",stroke:"white"}),G]})]})]})})},U=n(41),H=n(518),W=n(78),V=n(115),q=n(136),Y=n(308),X=n(85),J=n(158),Q=n(312),Z=n(730),K=n(271),$=n(1752),ee=n(1723),te=n(288),ne=n(398),ce=function(e){var t=e.sectionTitle,n=e.caption,c=void 0===n?void 0:n,r=e.title,a=void 0===r?void 0:r,l=e.rows,u=e.index,d=e.openIndex,b=e.isSuccessScreen,j=void 0!==b&&b,f=Object(k.useState)(!1),p=Object(o.a)(f,2),O=p[0],g=p[1],x=l.some((function(e){return e.status!==N.f.APPROVED})),h=Object(J.n)((function(e){return e.sellAssets})),m=Object(J.n)((function(e){return e.removeAssetMarketplace})),v=function(e){if(1===u){var t,n=Object(U.a)(h);try{for(n.s();!(t=n.n()).done;){var c=t.value;c.asset_contract.address===e.collectionAddress&&m(c,e.marketplace)}}catch(r){n.e(r)}finally{n.f()}}else m(e.asset,e.marketplace)};function w(e){var t,n,c=e,r=c.asset.newListings;return null!==(t=null===r||void 0===r||null===(n=r.find((function(e){return e.marketplace.name===c.marketplace.name})))||void 0===n?void 0:n.price)&&void 0!==t?t:0}Object(k.useEffect)((function(){g(u===d)}),[u,d]);var I=!x&&l.length>0&&!j;return Object(C.jsxs)(V.c,{flexWrap:"wrap",className:Y.m,marginTop:"10",marginBottom:"10",onClick:function(){return l.length>0&&g(!O)},color:I?"accentSuccess":"textPrimary",children:[I&&Object(C.jsx)(q.e,{style:{marginRight:"8px"}}),t,!j&&Object(C.jsx)(q.s,{className:Object(te.default)("".concat(O?"":ee.c," ").concat(ee.b))}),(O||j)&&Object(C.jsxs)(V.b,{gap:"12",width:"full",paddingTop:j?"28":"auto",className:Object(te.default)(!j&&ee.e),children:[c&&Object(C.jsx)(W.b,{color:"textPrimary",fontWeight:"normal",className:c,children:c}),a&&Object(C.jsx)(W.b,{color:"textSecondary",className:Y.a,children:a}),Object(C.jsx)(V.b,{gap:"8",children:l.map((function(e,t){var n,c;return Object(C.jsxs)(V.b,{gap:"8",children:[Object(C.jsxs)(V.c,{children:[null===(n=e.images)||void 0===n?void 0:n.map((function(t,n){return Object(C.jsx)(W.b,{as:"img",height:"20",width:"20",borderRadius:0===n&&e.collectionAddress?"round":"4",style:{zIndex:2-n},className:ee.d,src:t,alt:e.name},n)})),Object(C.jsx)(W.b,{marginLeft:"8",marginRight:"auto",fontWeight:"normal",color:"textPrimary",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:{sm:"max",md:e.status===N.f.REJECTED||e.status===N.f.FAILED?"120":"full"},className:Y.c,children:e.name}),j?w(e)&&"".concat(Object(ne.c)(Object(ne.g)(null!==(c=w(e))&&void 0!==c?c:0).toString())," ETH"):e.status===N.f.APPROVED?Object(C.jsx)(q.e,{height:"20",width:"20"}):e.status===N.f.FAILED||e.status===N.f.REJECTED?Object(C.jsxs)(V.c,{gap:"4",children:[Object(C.jsx)(W.b,{fontWeight:"normal",fontSize:"14",color:"textSecondary",children:e.status}),Object(C.jsx)(q.D,{})]}):e.status===N.f.SIGNING&&Object(C.jsx)(q.M,{height:"20",width:"20",stroke:"#4673FA"})]}),(e.status===N.f.FAILED||e.status===N.f.REJECTED)&&Object(C.jsxs)(V.c,{gap:"8",justifyContent:"center",children:[Object(C.jsx)(W.b,{width:"120",as:"button",className:Y.f,borderRadius:"12",border:"none",color:"red400",height:"32",cursor:"pointer",style:{backgroundColor:"#FA2B391A"},onClick:function(){var t=Object(i.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.stopPropagation(),v(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Remove"}),Object(C.jsx)(W.b,{width:"120",as:"button",className:Y.f,borderRadius:"12",border:"none",color:"accentAction",height:"32",cursor:"pointer",style:{backgroundColor:"#4C82FB29"},onClick:function(){var t=Object(i.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.stopPropagation(),!e.callback){t.next=4;break}return t.next=4,e.callback();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Try again"})]})]},t)}))})]})]})},re=n(1732),ae=function(){var e=Object(p.useWeb3React)().provider,t=Object(J.n)((function(e){return e.sellAssets})),n=null===e||void 0===e?void 0:e.getSigner(),c=Object(J.k)((function(e){return e.listings})),r=Object(J.k)((function(e){return e.setListings})),a=Object(J.k)((function(e){return e.collectionsRequiringApproval})),u=Object(J.k)((function(e){return e.setCollectionsRequiringApproval})),d=Object(k.useState)(0),b=Object(o.a)(d,2),O=b[0],g=b[1],x=Object(J.k)((function(e){return e.listingStatus})),h=Object(J.k)((function(e){return e.setListingStatus})),m=Object(k.useState)(!1),v=Object(o.a)(m,2),w=v[0],I=v[1],E=Object(J.k)((function(e){return e.looksRareNonce})),A=Object(J.k)((function(e){return e.setLooksRareNonce})),y=Object(J.k)((function(e){return e.getLooksRareNonce})),T=Object(J.e)((function(e){return e.toggleBag})),S=Object(k.useRef)(E),P=Object(J.i)(),_=Object(j.useTrace)({modal:f.InterfaceModalName.NFT_LISTING});Object(k.useEffect)((function(){J.k.subscribe((function(e){return S.current=e.looksRareNonce}))}),[]);var z=Object(k.useMemo)((function(){return Object(re.d)(t)}),[t]),R=Object(k.useState)(0),L=Object(o.a)(R,2),G=L[0],B=L[1];Object(k.useEffect)((function(){Object(Z.a)().then((function(e){B(e||0)}))}),[]);var D=Object(l.a)({collection_addresses:t.map((function(e){return e.asset_contract.address})),token_ids:t.map((function(e){return e.tokenId})),marketplaces:Array.from(new Set(c.map((function(e){return e.marketplace.name})))),list_quantity:c.length,usd_value:G*z},_);Object(k.useEffect)((function(){(null===a||void 0===a?void 0:a.length)&&I(a.every((function(e){return e.status===N.f.APPROVED}))),!w||x!==N.f.PENDING&&x!==N.f.CONTINUE&&x!==N.f.SIGNING||(se(),ne())}),[a,w]);var F=Object(k.useMemo)((function(){return a.every((function(e){return e.status===N.f.APPROVED||e.status===N.f.PAUSED}))}),[a]),M=Object(k.useMemo)((function(){return c.every((function(e){return e.status===N.f.APPROVED||e.status===N.f.PAUSED}))}),[c]);Object(k.useEffect)((function(){x===N.f.SIGNING&&F&&M&&se()}),[F,M]);var te=function(){var e=Object(i.a)(s.a.mark((function e(){var t,c,r,i,o,d,b;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return Object(j.sendAnalyticsEvent)(f.NFTEventName.NFT_SELL_START_LISTING,Object(l.a)({},D)),h(N.f.SIGNING),t=H.b[H.a.MAINNET],e.next=7,n.getAddress();case 7:return c=e.sent,e.next=10,Object(Q.k)(c);case 10:r=e.sent,A(null!==r&&void 0!==r?r:0),(null===a||void 0===a?void 0:a.some((function(e){return e.status===N.f.PAUSED})))||(h(N.f.SIGNING),g(1)),i=t.TRANSFER_MANAGER_ERC721,o=Object(U.a)(a),e.prev=15,o.s();case 17:if((d=o.n()).done){e.next=29;break}if(b=d.value,e.t0=Object(re.h)(b.status),!e.t0){e.next=27;break}if(!P){e.next=26;break}return e.next=24,Object(re.a)(b,a,u,n,i,ae);case 24:e.next=27;break;case 26:Object(re.a)(b,a,u,n,i,ae);case 27:e.next=17;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(15),o.e(e.t1);case 34:return e.prev=34,o.f(),e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[15,31,34,37]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var t=Object(i.a)(s.a.mark((function t(){var a,i,o,u,d,b;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&e){t.next=2;break}return t.abrupt("return");case 2:h(N.f.SIGNING),g(2),i=Object(U.a)(c),t.prev=5,i.s();case 7:if((o=i.n()).done){t.next=15;break}if(u=o.value,t.t0=Object(re.h)(u.status),!t.t0){t.next=13;break}return t.next=13,Object(re.g)(u,c,r,n,e,y,A,ae);case 13:t.next=7;break;case 15:t.next=20;break;case 17:t.prev=17,t.t1=t.catch(5),i.e(t.t1);case 20:return t.prev=20,i.f(),t.finish(20);case 23:return d=c.every((function(e){return e.status===N.f.APPROVED})),b=c.some((function(e){return e.status===N.f.PAUSED})),d?(g(0),h(N.f.APPROVED)):b||h(N.f.FAILED),Object(j.sendAnalyticsEvent)(f.NFTEventName.NFT_LISTING_COMPLETED,Object(l.a)({signatures_approved:c.filter((function(e){return e.status===N.f.APPROVED})),list_quantity:c.length,usd_value:G*z},_)),t.t2=Q.j,t.t3=c,t.next=31,null===n||void 0===n?void 0:n.getAddress();case 31:if(t.t5=a=t.sent,t.t4=null!==t.t5,!t.t4){t.next=35;break}t.t4=void 0!==a;case 35:if(!t.t4){t.next=39;break}t.t6=a,t.next=40;break;case 39:t.t6="";case 40:return t.t7=t.t6,t.next=43,(0,t.t2)(t.t3,t.t7);case 43:case"end":return t.stop()}}),t,null,[[5,17,20,23]])})));return function(){return t.apply(this,arguments)}}(),ae=function(){var e,t=Object(U.a)(a);try{for(t.s();!(e=t.n()).done;){var n=e.value;Object(re.e)(n,a,u)}}catch(l){t.e(l)}finally{t.f()}var s,i=Object(U.a)(c);try{for(i.s();!(s=i.n()).done;){var o=s.value;Object(re.e)(o,c,r)}}catch(l){i.e(l)}finally{i.f()}},se=function(){var e,t=Object(U.a)(a);try{for(t.s();!(e=t.n()).done;){var n=e.value;Object(re.f)(n,a,u)}}catch(l){t.e(l)}finally{t.f()}var s,i=Object(U.a)(c);try{for(i.s();!(s=i.n()).done;){var o=s.value;Object(re.f)(o,c,r)}}catch(l){i.e(l)}finally{i.f()}},ie=Object(k.useMemo)((function(){return x===N.f.APPROVED}),[x]);return Object(C.jsx)(j.Trace,{modal:f.InterfaceModalName.NFT_LISTING,children:Object(C.jsxs)(V.b,{paddingTop:"20",paddingBottom:"20",paddingLeft:"12",paddingRight:"12",children:[Object(C.jsxs)(V.c,{className:Y.k,marginBottom:"10",children:[P&&!ie&&Object(C.jsx)(W.b,{paddingTop:"4",marginRight:"4",onClick:T,children:Object(C.jsx)(q.p,{height:28,width:28})}),ie?"Success!":"Listing ".concat(t.length," NFTs"),Object(C.jsx)(W.b,{as:"button",border:"none",color:"textSecondary",backgroundColor:"backgroundSurface",marginLeft:"auto",marginRight:"0",paddingRight:"0",display:{sm:"flex",md:"none"},cursor:"pointer",onClick:T,children:Object(C.jsx)(q.ib,{height:28,width:28,fill:X.c.colors.textPrimary})})]}),Object(C.jsx)(V.b,{overflowX:"hidden",overflowY:"auto",style:{maxHeight:"60vh"},children:ie?Object(C.jsx)(j.Trace,{name:f.NFTEventName.NFT_LISTING_COMPLETED,properties:Object(l.a)({list_quantity:c.length,usd_value:G*z},_),shouldLogImpression:!0,children:Object(C.jsx)(ce,{sectionTitle:"Listed ".concat(c.length," item").concat(Object(K.a)(c.length)," for sale"),rows:c,index:0,openIndex:O,isSuccessScreen:!0})}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(ce,{sectionTitle:"Approve ".concat(a.length," collection").concat(Object(K.a)(a.length)),title:"COLLECTIONS",rows:a,index:1,openIndex:O}),Object(C.jsx)(ce,{sectionTitle:"Confirm ".concat(c.length," listing").concat(Object(K.a)(c.length)),caption:"Now you can sign to list each item",title:"NFTS",rows:c,index:2,openIndex:O})]})}),Object(C.jsx)("hr",{className:ee.f}),Object(C.jsxs)(V.c,{className:Y.m,marginTop:"12",marginBottom:ie?"8":"20",children:["Return if sold",Object(C.jsxs)(V.c,{className:Y.n,marginLeft:"auto",marginRight:"0",children:[z,"\xa0ETH"]})]}),ie?Object(C.jsxs)(W.b,{as:"span",className:Y.g,color:"textSecondary",children:["Status:"," ",Object(C.jsx)(W.b,{as:"span",color:"accentSuccess",children:"Confirmed"})]}):Object(C.jsx)($.a,{onClick:function(){se(),w?ne():te()},buttonText:"Start listing",showWarningOverride:P}),(x===N.f.PENDING||x===N.f.SIGNING)&&Object(C.jsx)(W.b,{as:"button",border:"none",backgroundColor:"backgroundSurface",cursor:"pointer",color:"orange",className:ee.a,onClick:function(){ae()},type:"button",children:"Stop listing"})]})})},se=n(537),ie=n(1743),oe=n(745),le=n(289),ue=n(156),de=n(740),be=n.n(de),je=(n(363),n(1754),n(38)),fe=n(35),pe=Object(u.keyframes)(c||(c=Object(fe.a)(["\n  0% {\n    stroke-dashoffset: 1000;\n  }\n  100% {\n    stroke-dashoffset: 0;\n  }\n"]))),Oe=u.default.circle.withConfig({componentId:"sc-5ix82i-0"})(["stroke-dasharray:1000;stroke-dashoffset:0;-webkit-animation:"," linear;animation:"," linear;animation-duration:160s;stroke:",";"],pe,pe,(function(e){return e.theme.accentAction})),ge=function(){return Object(C.jsx)(W.b,{display:"flex",position:"absolute",children:Object(C.jsx)("svg",{height:"18px",width:"18px",children:Object(C.jsx)(Oe,{strokeWidth:"".concat(1.5),strokeLinecap:"round",style:{transform:"rotate(90deg)",transformOrigin:"50% 50%"},fill:"transparent",r:"8px",cx:"9px",cy:"9px"})})})},xe=n(1718),he=n(1714),me=n(55),ve=(n(532),n(1755),"_1kuawc1 rgw6ez2a7 rgw6ez2fp rgw6ez2kv rgw6ez24d rgw6ez4av rgw6ez3pv rgw6ez76b rgw6ez1bp rgw6ez77v"),we="rgw6ez12p rgw6ez19d rgw6ez461 rgw6ez77n",Ie="_1kuawc7",Ne="_1kuawcb rgw6ezb1 rgw6ezcv rgw6ez7if rgw6ez427 rgw6ez421",Ee="rgw6ezcp rgw6ezav rgw6ez7lb rgw6ez7if rgw6ez421 rgw6ez427 rgw6ez4b1",ke="rgw6ez3u7",Ae=Object(u.default)(je.s).withConfig({componentId:"sc-iebvtt-0"})(["border-radius:12px;font-size:14px;line-height:16px;margin-left:16px;padding:12px 14px;"]),ye=Object(u.default)(je.s).withConfig({componentId:"sc-iebvtt-1"})(["border-radius:12px;flex:1 1 auto;font-size:14px;padding:8px;width:50%;"]),Te=u.default.div.withConfig({componentId:"sc-iebvtt-2"})(["position:absolute;display:block;right:-11px;top:-11px;z-index:1;transition:250ms;width:45px;height:45px;display:flex;align-items:center;justify-content:center;"]),Se=function(e){var t=e.onClick;return Object(C.jsx)(Te,{onClick:t,children:Object(C.jsx)(q.t,{})})},Ce=function(){return Object(C.jsx)(W.b,{position:"relative",background:"loadingBackground",className:we,children:Object(C.jsxs)(W.b,{position:"absolute",textAlign:"center",left:"1/2",top:"1/2",style:{transform:"translate3d(-50%, -50%, 0)"},color:"gray500",fontSize:"12",fontWeight:"normal",children:["Image",Object(C.jsx)("br",{}),"not",Object(C.jsx)("br",{}),"available"]})})},Pe=function(e){var t,n=e.asset,c=e.usdPrice,r=e.removeAsset,a=e.showRemove,s=e.grayscale,i=e.isMobile,l=Object(k.useState)(!1),u=Object(o.a)(l,2),d=u[0],j=u[1],f=Object(k.useState)(!n.smallImageUrl),p=Object(o.a)(f,2),O=p[0],g=p[1],x=Object(k.useState)(!1),h=Object(o.a)(x,2),m=h[0],v=h[1],w=Object(k.useCallback)((function(){return v(!0)}),[]),I=Object(k.useCallback)((function(){return v(!1)}),[]),N=Boolean(a&&m&&!i),A=n.updatedPriceInfo?n.updatedPriceInfo.ETHPrice:n.priceInfo.ETHPrice,y=Object(E.o)(A),T=Object(E.h)(c?parseFloat(Object(b.formatEther)(A))*c:c,!0),S=Object(k.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),r([n])}),[n,r]);return Object(C.jsx)(me.b,{to:Object(E.r)(n),style:{textDecoration:"none"},children:Object(C.jsxs)(V.c,{className:ve,onMouseEnter:w,onMouseLeave:I,children:[Object(C.jsxs)(W.b,{position:"relative",display:"flex",children:[a&&i&&Object(C.jsx)(Se,{onClick:S}),!O&&Object(C.jsx)(W.b,{as:"img",src:n.smallImageUrl,alt:n.name,className:Object(te.default)(we,s&&!m&&Ie),onLoad:function(){j(!0)},onError:function(){g(!0)},visibility:d?"visible":"hidden"}),!d&&Object(C.jsx)(W.b,{position:"absolute",className:"".concat(we," ").concat(he.b)}),O&&Object(C.jsx)(Ce,{})]}),Object(C.jsxs)(V.b,{overflow:"hidden",width:"full",color:s?"textSecondary":"textPrimary",children:[Object(C.jsxs)(V.c,{overflow:"hidden",width:"full",whiteSpace:"nowrap",children:[Object(C.jsx)(W.b,{className:Ne,children:null!==(t=n.name)&&void 0!==t?t:"#".concat(n.tokenId)}),n.susFlag&&Object(C.jsx)(xe.s,{})]}),Object(C.jsxs)(V.c,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[Object(C.jsx)(W.b,{className:Ee,children:n.collectionName}),n.collectionIsVerified&&Object(C.jsx)(q.hb,{className:ke})]})]}),N&&Object(C.jsx)(Ae,{onClick:S,emphasis:je.e.medium,size:je.n.medium,children:"Remove"}),(!N||i)&&Object(C.jsxs)(V.b,{flexShrink:"0",alignItems:"flex-end",children:[Object(C.jsxs)(W.b,{className:"_1kuawc9 rgw6ez3p7 rgw6ezb1 rgw6ezd1 rgw6ez3u7",children:[y,"\xa0ETH"]}),Object(C.jsx)(W.b,{className:Ee,children:T})]})]})})},_e=function(e){var t,n=e.asset,c=e.usdPrice,r=e.markAssetAsReviewed,a=e.top,s=e.isMobile,i=d.a.from(null===(t=n.updatedPriceInfo)||void 0===t?void 0:t.ETHPrice).gt(d.a.from(n.priceInfo.ETHPrice)),o=Object(k.useCallback)((function(e){e.preventDefault(),e.stopPropagation();r(n,!1)}),[n,r]),l=Object(k.useCallback)((function(e){e.preventDefault(),e.stopPropagation();r(n,!0)}),[n,r]);return Object(C.jsxs)(V.b,{className:"rgw6ez2lj rgw6ez251 rgw6ezjv rgw6ezpd rgw6ez4ov rgw6ez3pj rgw6ez4av rgw6ez76n rgw6ez7g3 rgw6ez50j rgw6ez5l1 rgw6ez1bp rgw6ez76b",borderTopColor:a?"backgroundOutline":"transparent",children:[Object(C.jsxs)(V.c,{className:"rgw6ezcp rgw6ezav rgw6ez7lb rgw6ez48p rgw6ez3p7",children:[i?Object(C.jsx)(q.Z,{}):Object(C.jsx)(q.Y,{}),Object(C.jsx)(W.b,{children:"Price ".concat(i?"increased":"decreased"," from ").concat(Object(E.o)(n.priceInfo.ETHPrice)," ETH")})]}),Object(C.jsx)(W.b,{style:{marginLeft:"-8px",marginRight:"-8px"},children:Object(C.jsx)(Pe,{asset:n,usdPrice:c,removeAsset:function(){},isMobile:s})}),Object(C.jsxs)(V.c,{gap:"8",justifyContent:"space-between",children:[Object(C.jsx)(ye,{onClick:o,emphasis:je.e.medium,size:je.n.small,children:"Remove"}),Object(C.jsx)(ye,{onClick:l,emphasis:je.e.high,size:je.n.small,children:"Keep"})]})]})},ze=function(e){var t=e.assets;return Object(C.jsx)(V.b,{display:"grid",style:{gridTemplateColumns:"repeat(".concat(t.length,", 20px)"),width:"".concat(32+20*(t.length-1),"px")},children:t.map((function(e,t){return Object(C.jsx)(W.b,{as:"img",src:e.smallImageUrl,width:"32",height:"32",borderStyle:"solid",borderWidth:"1px",borderColor:"backgroundSurface",borderRadius:"4",style:{zIndex:t},className:Ie},"".concat(e.address,"-").concat(e.tokenId))}))})},Re=function(e){var t=e.assets,n=e.usdPrice,c=e.clearUnavailableAssets,r=e.didOpenUnavailableAssets,a=e.setDidOpenUnavailableAssets,s=e.isMobile,i=Object(k.useReducer)((function(e){return!e}),!1),l=Object(o.a)(i,2),u=l[0],d=l[1],b=Object(k.useState)(8),j=Object(o.a)(b,2),f=j[0],p=j[1];if(Object(k.useEffect)((function(){if(f){var e=setInterval((function(){p(f-1)}),1e3);return function(){return clearInterval(e)}}r||(c(),a(!1))}),[f,c,r,a]),!t||0===t.length)return null;var O=t.length>1,g=u||!O;return Object(C.jsx)(V.b,{className:"rgw6ez2lj rgw6ez251 rgw6ezjv rgw6ezpd rgw6ez4ov rgw6ez3pv rgw6ez4av rgw6ez76n rgw6ez7g3 rgw6ez50j rgw6ez5wv rgw6ez5l1 rgw6ez1bp",children:Object(C.jsxs)(V.b,{children:[Object(C.jsxs)(V.c,{justifyContent:"space-between",marginBottom:g?"12":"0",cursor:O?"pointer":"default",onClick:function(){O&&(!r&&a(!0),d())},children:[Object(C.jsxs)(V.c,{gap:"12",color:"textSecondary",className:Y.c,children:[!g&&Object(C.jsx)(ze,{assets:t.slice(0,5)}),"No longer available"]}),O&&Object(C.jsx)(V.c,{color:"textSecondary",children:u?Object(C.jsx)(q.r,{}):Object(C.jsx)(q.o,{})}),!r&&Object(C.jsxs)(V.c,{position:"relative",width:"20",height:"20",color:"textPrimary",justifyContent:"center",cursor:"pointer",onClick:c,children:[Object(C.jsx)(ge,{}),Object(C.jsx)(q.v,{})]})]}),Object(C.jsx)(V.b,{gap:"8",style:{marginLeft:"-8px",marginRight:"-8px"},children:g&&t.map((function(e){return Object(C.jsx)(Pe,{asset:e,usdPrice:n,removeAsset:function(){},grayscale:!0,isMobile:s},e.id)}))})]})})},Le=function(){var e=Object(J.e)((function(e){return e.bagStatus})),t=Object(J.e)((function(e){return e.setBagStatus})),n=Object(J.e)((function(e){return e.markAssetAsReviewed})),c=Object(J.e)((function(e){return e.didOpenUnavailableAssets})),r=Object(J.e)((function(e){return e.setDidOpenUnavailableAssets})),a=Object(J.e)((function(e){return e.itemsInBag})),s=Object(J.e)((function(e){return e.setItemsInBag})),i=Object(J.e)((function(e){return e.removeAssetsFromBag})),o=Object(J.i)(),u=Object(k.useMemo)((function(){return Object(E.E)(a)}),[a]),d=Object(le.useQuery)(["fetchPrice",{}],(function(){return Object(E.j)()}),{}).data,b=Object(k.useMemo)((function(){return{unchangedAssets:u.filter((function(e){return e.status===N.c.ADDED_TO_BAG||e.status===N.c.REVIEWED})).map((function(e){return e.asset})),priceChangedAssets:u.filter((function(e){return e.status===N.c.REVIEWING_PRICE_CHANGE})).map((function(e){return e.asset})),unavailableAssets:u.filter((function(e){return e.status===N.c.UNAVAILABLE})).map((function(e){return e.asset})),availableItems:u.filter((function(e){return e.status!==N.c.UNAVAILABLE}))}}),[u]),p=b.unchangedAssets,O=b.priceChangedAssets,g=b.unavailableAssets,x=b.availableItems;return Object(k.useEffect)((function(){var n=O.length>0,c=u.length>0;n&&Object(j.sendAnalyticsEvent)(f.NFTEventName.NFT_BUY_BAG_CHANGED,Object(l.a)({usd_value:d,bag_quantity:u},Object(E.k)(O))),e!==N.d.IN_REVIEW||n||t(c?N.d.CONFIRM_REVIEW:N.d.ADDING_TO_BAG),e!==N.d.CONFIRM_REVIEW||c||t(N.d.ADDING_TO_BAG)}),[e,u,O,t,d]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(V.b,{display:O.length>0||g.length>0?"flex":"none",children:[g.length>0&&Object(C.jsx)(j.Trace,{name:f.NFTEventName.NFT_BUY_BAG_CHANGED,properties:Object(l.a)({usd_value:d,bag_quantity:u.length},Object(E.k)(g)),shouldLogImpression:!0,children:Object(C.jsx)(Re,{assets:g,usdPrice:d,clearUnavailableAssets:function(){return s(x)},didOpenUnavailableAssets:c,setDidOpenUnavailableAssets:r,isMobile:o})}),O.map((function(e,t){return Object(C.jsx)(_e,{asset:e,usdPrice:d,markAssetAsReviewed:n,top:0===t&&0===g.length,isMobile:o},e.id)}))]}),Object(C.jsx)(V.b,{children:p.slice(0).reverse().map((function(e){return Object(C.jsx)(Pe,{asset:e,usdPrice:d,removeAsset:i,showRemove:!0,isMobile:o},e.id)}))})]})},Ge=n(727),Be=Object(u.default)(T.c).withConfig({componentId:"sc-bq6y8h-0"})(["color:",";cursor:pointer;font-weight:600;font-size:14px;line-height:16px;:active{text-decoration:none;}"],(function(e){return e.theme.textSecondary})),De=u.default.button.withConfig({componentId:"sc-bq6y8h-1"})(["align-items:center;background-color:transparent;border-radius:8px;border:none;color:",";cursor:pointer;display:flex;flex-direction:row;justify-content:flex-end;margin-left:auto;padding:2px;opacity:1;",""],(function(e){return e.theme.textPrimary}),Ge.a),Fe=u.default.div.withConfig({componentId:"sc-bq6y8h-2"})(["align-items:center;background-color:",";border-radius:100px;font-weight:bold;color:",";display:flex;font-size:10px;justify-content:center;min-width:",";min-height:",";padding:4px 6px;"],(function(e){return e.theme.accentAction}),(function(e){return e.theme.accentTextLightPrimary}),(function(e){return e.sizing}),(function(e){return e.sizing})),Me=u.default.div.withConfig({componentId:"sc-bq6y8h-3"})(["align-items:center;display:flex;flex-direction:row;gap:8px;justify-content:flex-start;margin:16px 28px;text-align:center;"]),Ue=function(e){var t=e.numberOfAssets,n=e.closeBag,c=e.resetFlow,r=e.isProfilePage,a=Object(k.useMemo)((function(){return function(e){var t=e.toString().length;return"".concat(14+6*t,"px")}(t)}),[t]);return Object(C.jsxs)(Me,{children:[Object(C.jsx)(T.v.HeadlineSmall,{children:r?Object(C.jsx)(g.b,{id:"Sell"}):Object(C.jsx)(g.b,{id:"Bag"})}),t>0&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Fe,{sizing:a,children:t}),Object(C.jsx)(Be,{onClick:c,children:Object(C.jsx)(g.b,{id:"Clear all"})})]}),Object(C.jsx)(De,{onClick:n,children:Object(C.jsx)(q.j,{"data-testid":"nft-bag-close-icon"})})]})},He=Object(u.default)(V.b).withConfig({componentId:"sc-xhr1rt-0"})(["gap:12px;margin-top:68px;"]),We=function(){var e=Object(O.c)();return Object(C.jsxs)(He,{children:[Object(C.jsx)(V.a,{children:e?Object(C.jsx)(q.K,{color:X.c.colors.textTertiary}):Object(C.jsx)(q.k,{color:X.c.colors.textTertiary,height:"96px",width:"96px",strokeWidth:"1px"})}),e?Object(C.jsx)(V.a,{"data-testid":"nft-no-nfts-selected",className:Y.m,children:"No NFTs selected"}):Object(C.jsxs)(V.b,{gap:"16",children:[Object(C.jsx)(V.a,{"data-testid":"nft-empty-bag",className:Y.m,style:{lineHeight:"24px"},children:"Your bag is empty"}),Object(C.jsx)(V.a,{fontSize:"12",fontWeight:"normal",color:"textSecondary",style:{lineHeight:"16px"},children:"Selected NFTs will appear here"})]})]})},Ve=function(e){var t=e.asset,n=Object(J.n)((function(e){return e.removeSellAsset})),c=Object(J.i)(),r=Object(k.useState)(!1),a=Object(o.a)(r,2),s=a[0],i=a[1],l=function(){return i(!s)},u=function(e){e.preventDefault(),e.stopPropagation(),n(t)};return Object(C.jsxs)(V.c,{className:ve,onMouseEnter:l,onMouseLeave:l,children:[Object(C.jsxs)(W.b,{position:"relative",display:"flex",children:[c&&Object(C.jsx)(Se,{onClick:u}),Object(C.jsx)("img",{src:t.smallImageUrl,alt:t.name,className:we})]}),Object(C.jsxs)(V.b,{overflow:"hidden",width:"full",color:"textPrimary",children:[Object(C.jsx)(V.c,{overflow:"hidden",width:"full",justifyContent:"space-between",whiteSpace:"nowrap",gap:"16",children:Object(C.jsx)(W.b,{className:Ne,children:t.name||"#".concat(t.tokenId)})}),Object(C.jsxs)(V.c,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[Object(C.jsx)(W.b,{className:Ee,children:t.asset_contract.name}),t.collectionIsVerified&&Object(C.jsx)(q.hb,{className:ke})]})]}),s&&!c&&Object(C.jsx)(Ae,{onClick:u,emphasis:je.e.medium,size:je.n.medium,children:"Remove"})]})},qe=function(){var e=Object(J.n)((function(e){return e.sellAssets}));return Object(C.jsx)(V.b,{children:e.length?e.map((function(e,t){return Object(C.jsx)(Ve,{asset:e},t)})):null})},Ye=320,Xe=360,Je=u.default.div.withConfig({componentId:"sc-1cpp7nx-0"})(["position:fixed;display:flex;flex-direction:column;top:88px;right:20px;width:","px;height:calc(100vh - 108px);background:",";border:1px solid ",";border-radius:16px;box-shadow:",";z-index:",";@media only screen and (max-width:","){right:0px;top:0px;width:100%;height:100%;border-radius:0px;border:none;}@media only screen and (min-width:","){width:","px;}"],Ye,(function(e){return e.theme.backgroundSurface}),(function(e){return e.theme.backgroundOutline}),(function(e){return e.theme.shallowShadow}),(function(e){return e.raiseZIndex?ue.a.modalOverTooltip:3}),(function(e){var t=e.theme;return"".concat(t.breakpoint.sm,"px")}),(function(e){var t=e.theme;return"".concat(t.breakpoint.xxxl,"px")}),Xe),Qe=u.default.div.withConfig({componentId:"sc-1cpp7nx-1"})(["position:fixed;background:rgba(0,0,0,0.7);top:0px;width:100%;height:100%;"]),Ze=function(e){var t=e.top,n=e.show;return Object(C.jsx)(W.b,{marginX:"24",borderWidth:"1px",borderStyle:"solid",borderColor:"transparent",borderTopColor:t?"transparent":"backgroundOutline",borderBottomColor:t?"backgroundOutline":"transparent",opacity:n?"1":"0",transition:"250"})};t.default=function(){var e=Object(p.useWeb3React)(),t=e.account,n=e.provider,c=Object(J.n)((function(e){return{resetSellAssets:e.reset,sellAssets:e.sellAssets}}),be.a),a=c.resetSellAssets,u=c.sellAssets,g=Object(J.l)((function(e){var t=e.setProfilePageState;return{profilePageState:e.state,setProfilePageState:t}}),be.a),x=g.profilePageState,h=g.setProfilePageState,m=Object(J.e)((function(e){return Object(l.a)(Object(l.a)({},e),{},{bagIsLocked:e.isLocked,uncheckedItemsInBag:e.itemsInBag})}),be.a),v=m.bagStatus,w=m.setBagStatus,I=m.didOpenUnavailableAssets,A=m.setDidOpenUnavailableAssets,y=m.bagIsLocked,T=m.setLocked,S=m.reset,P=m.setItemsInBag,_=m.bagExpanded,z=m.toggleBag,R=m.setTotalEthPrice,L=m.setTotalUsdPrice,G=m.setBagExpanded,B=Object(J.e)((function(e){return{uncheckedItemsInBag:e.itemsInBag}})).uncheckedItemsInBag,D=Object(O.c)(),F=Object(O.a)(),U=Object(O.b)(),H=Object(J.i)(),q=Object(J.o)((function(e){return e.sendTransaction})),X=Object(J.o)((function(e){return e.state})),Z=Object(J.o)((function(e){return e.setState})),K=Object(k.useRef)(X),$=Object(J.p)((function(e){return[e.setTransactionResponse]})),ee=Object(o.a)($,1)[0],te=Object(le.useQueryClient)(),ne=Object(k.useMemo)((function(){return Object(E.E)(B)}),[B]),ce=Object(k.useState)(!1),re=Object(o.a)(ce,2),ue=re[0],de=re[1],je=Object(k.useState)(!1),fe=Object(o.a)(je,2),pe=fe[0],Oe=fe[1],ge=Object(k.useState)(0),xe=Object(o.a)(ge,2),he=xe[0],me=xe[1],ve=Object(le.useQuery)(["fetchPrice",{}],(function(){return Object(E.j)()}),{}).data,we=Object(k.useMemo)((function(){var e=ne.reduce((function(e,t){return t.status!==N.c.UNAVAILABLE?e.add(d.a.from(t.asset.updatedPriceInfo?t.asset.updatedPriceInfo.ETHPrice:t.asset.priceInfo.ETHPrice)):e}),d.a.from(0));return{totalEthPrice:e,totalUsdPrice:ve?parseFloat(Object(b.formatEther)(e))*ve:void 0}}),[ne,ve]),Ie=we.totalEthPrice,Ne=we.totalUsdPrice,Ee=function(){var e=Object(i.a)(s.a.mark((function e(t){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,q(null===n||void 0===n?void 0:n.getSigner(),ne.filter((function(e){return e.status!==N.c.UNAVAILABLE})).map((function(e){return e.asset})),t);case 4:!(c=e.sent)||K.current!==N.l.Success&&K.current!==N.l.Failed||(T(!1),de(!1),ee(c),G({bagExpanded:!1}),S());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=Object(k.useCallback)((function(){G({bagExpanded:!1,manualClose:!0})}),[G]),Ae=function(){var e=Object(i.a)(s.a.mark((function e(){var n,c,a,i,o,l,u,b,j,f,p,O;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ne.filter((function(e){return e.status!==N.c.UNAVAILABLE})).map((function(e){return e.asset})),c=Object(E.b)(n.reduce((function(e,t){return e.add(d.a.from(t.priceInfo.ETHPrice))}),d.a.from(0)).toString()),I&&A(!1),!y&&T(!0),w(N.d.FETCHING_ROUTE),e.prev=5,e.next=8,te.fetchQuery(["assetsRoute",c,n,t],(function(){return Object(Q.f)({toSell:[c],toBuy:n,senderAddress:null!==t&&void 0!==t?t:""})}));case 8:a=e.sent,i=Object(oe.a)(n,a.route),o=i.filter((function(e){return e.updatedPriceInfo})).sort(E.G),l=i.filter((function(e){return e.isUnavailable})),u=i.filter((function(e){return!e.updatedPriceInfo&&!e.isUnavailable})),b=u.length>0,j=o.length>0,f=l.length>0,p=b||j||f,O=j||f,P([].concat(Object(r.a)(l.map((function(e){return{asset:e,status:N.c.UNAVAILABLE}}))),Object(r.a)(o.map((function(e){return{asset:e,status:N.c.REVIEWING_PRICE_CHANGE}}))),Object(r.a)(u.map((function(e){return{asset:e,status:N.c.REVIEWED}}))))),T(!1),p?O?w(j?N.d.IN_REVIEW:N.d.CONFIRM_REVIEW):(Ee(a),w(N.d.CONFIRMING_IN_WALLET)):w(N.d.ADDING_TO_BAG),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(5),w(N.d.ADDING_TO_BAG);case 26:case"end":return e.stop()}}),e,null,[[5,23]])})));return function(){return e.apply(this,arguments)}}();Object(k.useEffect)((function(){J.o.subscribe((function(e){return K.current=e.state}))}),[]),Object(k.useEffect)((function(){y&&!ue&&de(!0)}),[y,ue]),Object(k.useEffect)((function(){K.current===N.l.Confirming&&w(N.d.PROCESSING_TRANSACTION),K.current!==N.l.Denied&&K.current!==N.l.Invalid||(K.current===N.l.Invalid?w(N.d.WARNING):w(N.d.CONFIRM_REVIEW),Z(N.l.New),T(!1),de(!1))}),[K.current]),Object(k.useEffect)((function(){R(Ie),L(Ne)}),[Ie,Ne,R,L]);var ye=ne.length>0,Te=ne.length>0,Se=u.length>0,Ce=Boolean(!D&&!Te&&v===N.d.ADDING_TO_BAG||D&&!Se),Pe=Object(k.useMemo)((function(){return Object(l.a)({usd_value:Ne},Object(E.k)(ne.map((function(e){return e.asset}))))}),[ne,Ne]);return _&&U?Object(C.jsxs)(se.a,{children:[Object(C.jsx)(Je,{"data-testid":"nft-bag",raiseZIndex:H||ue,children:D&&x===N.i.LISTING?Object(C.jsx)(ae,{}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Ue,{numberOfAssets:D?u.length:ne.length,closeBag:ke,resetFlow:D?a:S,isProfilePage:D}),Ce&&Object(C.jsx)(We,{}),Object(C.jsx)(Ze,{top:!0,show:pe&&he>0}),Object(C.jsx)(V.b,{ref:function(e){if(null!==e){var t=e.scrollHeight>e.clientHeight;t!==pe&&Oe(t)}},className:"_1jcz50r1 rgw6ez2av rgw6ez2gd rgw6ez1vp rgw6ez7jr",onScroll:function(e){var t=e.currentTarget.scrollTop,n=e.currentTarget.clientHeight,c=e.currentTarget.scrollHeight;me(t?(t+n)/c*100:0)},gap:"12",children:D?Object(C.jsx)(qe,{}):Object(C.jsx)(Le,{})}),ye&&!D&&Object(C.jsx)(M,{totalEthPrice:Ie,totalUsdPrice:Ne,bagStatus:v,fetchAssets:Ae,eventProperties:Pe}),Se&&D&&Object(C.jsx)(W.b,{marginTop:"32",marginX:"28",marginBottom:"16",paddingY:"10",className:"".concat(Y.e," ").concat(Y.h),backgroundColor:"accentAction",color:"white",textAlign:"center",onClick:function(){H&&z(),h(N.i.LISTING),Object(j.sendAnalyticsEvent)(f.NFTEventName.NFT_PROFILE_PAGE_START_SELL,{list_quantity:u.length,collection_addresses:u.map((function(e){return e.asset_contract.address})),token_ids:u.map((function(e){return e.tokenId}))})},children:"Continue"})]})}),F?Object(C.jsx)(Qe,{onClick:z}):ue&&Object(C.jsx)(ie.a,{onClick:function(){return y?void 0:de(!1)}})]}):null}}}]);
//# sourceMappingURL=13.86a17ff9.chunk.js.map